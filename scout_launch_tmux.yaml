session_name: aigc_launch

environment:
  DELAY: "2"
  RATE: "1.0"
  SET_NUM: Police_2F

options:
  default-command: /bin/bash

windows:
- window_name: lamp
  focus: true
  layout: tiled
  shell_command_before:
    - export DATE=$(date "+%y-%m-%d_%H%M%S")
    - source ~/catkin_ws/devel/setup.bash
    - source ~/catkin_ws/install/setup.bash
      #  - rosparam set /use_sim_time true
  panes:
    # - roscore
    - roscore
    - sleep 5; roslaunch teraranger evo.launch
    - sleep 3; roslaunch mavros_control px4.launch
    - sleep 9; source ~/catkin_ws/install/setup.bash && roslaunch tf_listener tf.launch
    - sleep 3; source ~/carto_ws/devel_isolated/setup.bash && roslaunch cartographer_ros stix.launch
    - sleep 3; source ~/catkin_ws/install/setup.bash && roslaunch offboard_drone offboard.launch
    - sleep 3; roslaunch distance_map distance_map.launch
    - sleep 3; source ~/catkin_ws/install/setup.bash && roslaunch astar astar.launch
    - sleep 3; source ~/catkin_ws/install/setup.bash && roslaunch mission_planner mission_planner_csv.launch mission_file:=mission_${SET_NUM}.csv
    - sleep 7; roslaunch realsense2_camera rs_rgbd.launch
    - sleep 7; rosrun audio_capture audio_pub.py
    - sleep 9; rosrun rviz rviz -d .rviz/scout.rviz 
    # - sleep 7; cd ~/flight_audio/ && python record_audio.py
    # - echo ${SET_NUM}_${DATE}; sleep 20; echo "20 sec passed";  sleep 100; cd /home/iitp00/flight_record/audio; arecord -t wav -c 8 -D plughw:2,0 -f S32_LE -r 48000 flight_audio_${SET_NUM}_${DATE}.wav
